<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link href="index.css" type="text/css" rel="stylesheet">
    <title>ssh保存密码自动登录</title>
  </head>
  <body>
    <h1>ssh保存密码自动登录</h1>
    <h3 id="2017-07-10">2017-07-10</h3>
<p><strong>使用ssh连接远程服务器时，总是要输入密码，感觉很麻烦，往上搜到的文章，总是有点遗漏或者不清晰，于是写下这篇文章来记录一下步骤</strong></p>
<p><strong>本机系统： OS X</strong></p>
<p><strong>远程机系统： centos 6</strong></p>
<ul>
<li>本机生成RSA公私密钥对<br />
<code>
ssh-keygen
</code><br />
选项全部默认为是，最后会在~/.ssh文件夹生成id_rsa和id_rsa.pub两个文件</li>
<li>改变.ssh目录权限<br />
<code>
chmod 755 ~/.ssh
</code></li>
<li>在~/.ssh文件夹下创建config文件<br />
内容如下：<br />
<code>
Host [自定义别名]
HostName [服务器ip地址]
User [用户名]
Port [服务器端口]
</code></li>
<li>将公钥复制到远程机上<br />
<code>
ssh-copy-id -i -p [端口] ~/.ssh/id_rsa/pub [用户名]@[ip地址]
</code><br />
这次还是需要输入密码的</li>
<li>连接上远程机<br />
<code>
ssh -p [端口] [用户名]@[ip地址]
</code><br />
输入密码</li>
<li>打开sshd_config<br />
<code>
vi /etc/ssh/sshd_config
</code><br />
将以下几行前面的'#'去掉  <br />
<code>
RSAAuthentication yes
PubkeyAuthentication yes
AuthorizedKeysFile .ssh/authorized_keys
</code></li>
<li>更改~/.ssh权限<br />
<code>
cd ~/.ssh
chmod 600 authorized_keys
</code></li>
<li>重启ssh<br />
<code>
service sshd restart
</code></li>
</ul>
<p><strong>回到本机，直接ssh -p [端口] [用户名]@[ip地址]，不用输入密码了，方便多了</strong></p>
  </body>
</html>
