<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
  </head>
  <body>
    <hr />
<p>layout: post<br />
title:  "Vue从零开始记录"<br />
date:   2017-05-28 14:59:24 +0800</p>
<h2 id="categories-vue">categories: vue</h2>
<p>Vue warn: You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.</p>
<p>解决方案：</p>
<p>node_modules中vue的package.json中可以看到，真正导出的是main指向的vue.runtime.common.js，所以如果直接import vue from 'vue'的话，引用的是vue.runtime.common.js，而vue其实是rumtime+compile两部分组成的，所以我们需要在webpack中设置个vue的别名，alias中添加一行'vue': 'vue/dist/vue.js'，然后项目中正常使用就可以了<br />
<br><br />
<br><br />
<br><br />
<br><br />
<br><br />
Vue warn: Error compiling template:</p>
<div id="app">
  <script type="text/javascript" src="app-46fdf745b7df8bcb9dd2.js"></script></div>
<p>Templates should only be responsible for mapping the state to the UI. Avoid placing tags with side-effects in your templates, such as <script>, as they will not be parsed.</p>
<p>解决方案：</p>
<p>使用html-webpack-plugin时，指定template对应的模板html中，不能有<div />这样的写法，必须是<div></div>这样的标准写法，否则会报错<br />
<br><br />
<br><br />
<br><br />
<br><br />
<br><br />
webpack HMR(hot module replacement) 如何对html-webpack-plugin生效？</p>
<p>解决方案：</p>
<p>step.1</p>
<p>server文件中添加</p>
<p>{% highlight ruby %}<br />
var compiler = wepback(wepbackConfig)<br />
var webpackHotMiddleware = require('webpack-hot-middleware')</p>
<p>var hotMiddleware = webpackHotMiddleware(compiler, {<br />
  log: function () {}<br />
})</p>
<p>compiler.plugin('compilation', function (compilation) {<br />
  compilation.plugin('html-webpack-plugin-after-emit', function (data, cb) {<br />
    hotMiddleware.publish({ action: 'reload' })<br />
    cb()<br />
  })<br />
})<br />
{% endhighlight %}</p>
<p>当webpack重新打包html时，会派送个自定义的reload事件</p>
<p>step.2</p>
<p>新建文件hotMiddlewareClient.js</p>
<p>{% highlight ruby %}<br />
var hotMiddlewareClient = require('webpack-hot-middleware/client?noInfo=true&amp;reload=true')</p>
<p>hotMiddlewareClient.subscribe(function (e) {<br />
  if (e.action === 'reload') {<br />
    console.log(e)<br />
    window.location.reload()<br />
  }<br />
})</p>
<p>{% endhighlight %}</p>
<p>接收reload事件，强制浏览器reload</p>
<p>step.3</p>
<p>在webpack.config.js中配置</p>
<p>{% highlight ruby %}<br />
entry: {<br />
  app: [<br />
    './hotMiddlewareClient',<br />
    path.join(SRC_PATH, 'index.js')<br />
  ]<br />
},<br />
{% endhighlight %}</p>
  </body>
</html>
