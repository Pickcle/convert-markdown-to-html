<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link href="index.css" type="text/css" rel="stylesheet">
    <title>Vue从零开始记录</title>
  </head>
  <body>
    <h1>Vue从零开始记录</h1>
    <h3 id="2017-06-01">2017-06-01</h3>
<p><strong>Vue warn: You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.</strong></p>
<p><strong>解决方案：</strong></p>
<ul>
<li>node_modules中vue的package.json中可以看到，真正导出的是main指向的vue.runtime.common.js，所以如果直接import vue from 'vue'的话，引用的是vue.runtime.common.js，而vue其实是rumtime+compile两部分组成的，所以我们需要在webpack中设置个vue的别名，alias中添加一行'vue': 'vue/dist/vue.js'，然后项目中正常使用就可以了</li>
</ul>
<p><strong>Vue warn: Error compiling template:Templates should only be responsible for mapping the state to the UI. Avoid placing tags with side-effects in your templates, such as <code>&lt;script&gt;</code>, as they will not be parsed.</strong>  </p>
<p><strong>解决方案：</strong></p>
<ul>
<li>使用html-webpack-plugin时，指定template对应的模板html中，不能有<code>&lt;div /&gt;</code>这样的写法，必须是<code>&lt;div&gt;&lt;/div&gt;</code>这样的标准写法，否则会报错</li>
</ul>
<p><strong>webpack HMR(hot module replacement) 如何对html-webpack-plugin生效？</strong></p>
<p><strong>解决方案：</strong></p>
<ul>
<li><p>server文件中添加</p>
<pre><code class="js language-js">var compiler = wepback(wepbackConfig)
var webpackHotMiddleware = require('webpack-hot-middleware')

var hotMiddleware = webpackHotMiddleware(compiler, {
log: function () {}
})

compiler.plugin('compilation', function (compilation) {
compilation.plugin('html-webpack-plugin-after-emit', function (data, cb) {
  hotMiddleware.publish({ action: 'reload' })
  cb()
})
})</code></pre>
<p><br />
当webpack重新打包html时，会派送个自定义的reload事件</p></li>
<li><p>新建文件hotMiddlewareClient.js</p>
<pre><code class="js language-js">var hotMiddlewareClient = require('webpack-hot-middleware/client?noInfo=true&amp;reload=true')

hotMiddlewareClient.subscribe(function (e) {
if (e.action === 'reload') {
  window.location.reload()
}
})</code></pre>
<p>接收reload事件，强制浏览器reload</p></li>
<li><p>在webpack.config.js中配置<br />
<code>
entry: {
app: [
  './hotMiddlewareClient',
  path.join(SRC_PATH, 'index.js')
]
},
</code></p></li>
</ul>
  </body>
</html>
